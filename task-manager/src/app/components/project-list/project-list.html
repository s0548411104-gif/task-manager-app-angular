<div class="page-container">
  <header class="Project-header">
    <h1>×”×¤×¨×•×™×§×˜×™× ×©×œ×™ ğŸš€</h1>
    <button (click)="toggleCreate()" class="circle-btn">
      {{ isCreateOpen() ? 'âœ–' : 'â•' }}
    </button>
  </header>

  @if (isCreateOpen()) {
  <div class="create-team-box slide-in">
    <input type="text" [formControl]="nameControl" placeholder="×©× ×¤×¨×•×™×§×˜ ×—×“×©..."> 
    <input type="text" [formControl]="descControl" placeholder="×ª×™××•×¨ ×”×¤×¨×•×™×§×˜...">
    
    <button (click)="createNewProj()" [disabled]="nameControl.invalid">×©××•×¨</button>
  </div>
  }

  <main class="project-grid">
    @if (projectsService.isLoading()) {
      <p>×˜×•×¢×Ÿ ×¤×¨×•×™×§×˜×™×...</p>
    } @else {
      <div class="projects-grid">
        @for (project of projectsService.myProjects(); track project.id) {
          <div class="project-card">
            <div class="card-header">
              <span class="id-tag">ID: {{ project.id }}</span>
              
              @if (editingProjectId() === project.id) {
                <div class="edit-mode-container" (click)="$event.stopPropagation()">
                  <input type="text" [formControl]="editNameControl" class="edit-input">
                  <div class="edit-btns">
                    <button (click)="saveEdit(project.id, $event)" class="save-btn" title="×©××•×¨">âœ…</button>
                    <button (click)="cancelEdit($event)" class="cancel-btn" title="×‘×™×˜×•×œ">âœ–</button>
                  </div>
                </div>
              } @else {
                <h3>{{ project.name }}</h3>
                <div class="header-actions">
                  <button class="edit-btn" (click)="startEdit(project, $event)" title="×¢×¨×•×š ×©×">âœï¸</button>
                  <button class="delete-btn" (click)="deleteProject(project.id, $event)" title="××—×§ ×¤×¨×•×™×§×˜">ğŸ—‘ï¸</button>
                </div>
              }
            </div>

            <p class="desc">{{ project.description }}</p>
            
            <button class="enter-btn" [routerLink]="['/projects', project.id, 'tasks']">
              ×¦×¤×” ×‘××©×™××•×ª â¤
            </button>

            <div class="team-badge">×¦×•×•×ª: {{ project.team_id }}</div>
          </div>
        } @empty {
          <p>××™×Ÿ ×¤×¨×•×™×§×˜×™× ×¢×“×™×™×Ÿ. ×¦×¨×™ ××—×“!</p>
        }
      </div>
    }
  </main>
</div>